<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Development Prompt Cards</title>
    <meta name="xai-key" content="xai-a2Oi7ieAgL195XyzbSYPYM0hPztn58z7isltarLBGC5bh0TMsRy0ZqFRewKTEKm4Bh4CMckQV5Rl7lq3">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Playfair+Display:wght@400;500;600;700&family=Caveat:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        teal: {
                            DEFAULT: '#26a69a',
                            light: '#e0f2f1',
                            medium: '#b2dfdb'
                        },
                        cream: '#f9f7f4',
                        charcoal: '#333333',
                        yellow: '#f4e4bc',
                        red: '#e53e3e',
                        mindfulness: {
                            DEFAULT: '#3b82f6',
                            light: '#dbeafe'
                        },
                        productivity: {
                            DEFAULT: '#f59e0b',
                            light: '#fef3c7'
                        },
                        confidence: {
                            DEFAULT: '#8b5cf6',
                            light: '#ede9fe'
                        },
                        habits: {
                            DEFAULT: '#10b981',
                            light: '#d1fae5'
                        },
                        relationships: {
                            DEFAULT: '#ec4899',
                            light: '#fce7f3'
                        },
                        career: {
                            DEFAULT: '#6366f1',
                            light: '#e0e7ff'
                        },
                        emotional: {
                            DEFAULT: '#8b5cf6',
                            light: '#ede9fe'
                        },
                        wellness: {
                            DEFAULT: '#059669',
                            light: '#d1fae5'
                        }
                    },
                    fontFamily: {
                        sans: ['Montserrat', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                        handwritten: ['Caveat', 'cursive'],
                    },
                }
            }
        }
    </script>
    <style>
        /* General font and color setup */
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #f9f7f4;
            color: #333333;
        }

        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }

        .handwritten {
            font-family: 'Caveat', cursive;
        }

        /* Notecard container styles */
        .notecard {
            transition: all 0.3s ease;
            border-radius: 12px;
            width: 100%;
            max-width: 630px; /* Approx 168mm (80% of A5 landscape width) at 96dpi */
            aspect-ratio: 210 / 148; /* A5 landscape ratio */
        }

        .notecard:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        .card-shadow {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Badge styles */
        .badge {
            position: absolute;
            top: -10px;
            right: -10px;
            color: white;
            font-size: 12px;
            font-weight: 600;
            padding: 5px 10px;
            border-radius: 20px;
            transform: rotate(10deg);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Button styles */
        .btn-primary {
            background-color: #26a69a;
            color: white;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #1e8e82;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Print styles for A5 landscape, one card per sheet */
        @media print {
            @page {
                size: A5 landscape;
                margin: 0;
            }
            .no-print {
                display: none !important;
            }
            .print-only {
                display: block !important;
            }
            body {
                background-color: white;
                margin: 0;
                padding: 0;
            }
            .card-grid {
                display: block !important;
            }
            .notecard {
                page-break-inside: avoid;
                box-shadow: none !important;
                border: 1px solid #ddd;
                width: 168mm; /* 80% of A5 landscape width (210mm) */
                height: 118.4mm; /* 80% of A5 landscape height (148mm) */
                max-width: none;
                margin: 14.8mm 21mm; /* Center within A5: (148mm - 118.4mm) / 2 = 14.8mm top/bottom, (210mm - 168mm) / 2 = 21mm left/right */
                padding: 8mm;
                font-size: 12pt;
                display: flex;
                flex-direction: column;
            }
            .notecard-content {
                flex-grow: 1;
                display: flex;
                flex-direction: column;
            }
            .response-lines {
                flex-grow: 1;
                display: flex;
                flex-direction: column;
                justify-content: space-between;
            }
            .badge {
                transform: none;
            }
        }
        .print-only {
            display: none;
        }
        .screen-only {
            display: block;
        }
        @media print {
            .screen-only {
                display: none !important;
            }
        }
    </style>
</head>
<body class="bg-cream">
    <div class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-teal py-6 no-print">
            <div class="container mx-auto px-4">
                <h1 class="text-3xl font-serif text-white text-center">Personal Development Prompt Cards</h1>
                <p class="text-center mt-2 text-white/80">Create beautiful prompting cards for self-help and personal growth</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow container mx-auto px-4 py-8">
            <!-- Generator Form -->
            <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-6 mb-8 no-print">
                <h2 class="text-2xl font-serif mb-4 text-charcoal">Create Your Prompt Cards</h2>
                
                <div class="mb-4">
                    <label for="niche" class="block text-sm font-medium text-charcoal/80 mb-1">Select Personal Development Niche</label>
                    <select id="niche" class="w-full px-4 py-2 border border-charcoal/20 rounded-md focus:ring-2 focus:ring-teal focus:border-teal">
                        <option value="">Select a niche...</option>
                        <option value="mindfulness">Mindfulness & Meditation</option>
                        <option value="productivity">Productivity & Time Management</option>
                        <option value="confidence">Confidence & Self-Esteem</option>
                        <option value="habits">Habit Formation</option>
                        <option value="relationships">Relationships & Communication</option>
                        <option value="career">Career Development</option>
                        <option value="emotional">Emotional Intelligence</option>
                        <option value="wellness">Health & Wellness</option>
                        <option value="custom">Custom Niche...</option>
                    </select>
                </div>
                
                <div id="customNicheField" class="mb-4 hidden">
                    <label for="customNiche" class="block text-sm font-medium text-charcoal/80 mb-1">Enter Custom Niche</label>
                    <input type="text" id="customNiche" class="w-full px-4 py-2 border border-charcoal/20 rounded-md focus:ring-2 focus:ring-teal focus:border-teal" placeholder="Enter your personal development niche">
                </div>
                
                <div class="mb-4">
                    <label for="subNiche" class="block text-sm font-medium text-charcoal/80 mb-1">Select Sub-Niche</label>
                    <select id="subNiche" class="w-full px-4 py-2 border border-charcoal/20 rounded-md focus:ring-2 focus:ring-teal focus:border-teal">
                        <option value="">First select a niche...</option>
                    </select>
                </div>
                
                <div id="customSubNicheField" class="mb-4 hidden">
                    <label for="customSubNiche" class="block text-sm font-medium text-charcoal/80 mb-1">Enter Custom Sub-Niche</label>
                    <input type="text" id="customSubNiche" class="w-full px-4 py-2 border border-charcoal/20 rounded-md focus:ring-2 focus:ring-teal focus:border-teal" placeholder="Enter your sub-niche">
                </div>
                
                <div class="mb-4">
                    <label for="cardCount" class="block text-sm font-medium text-charcoal/80 mb-1">Number of Cards (1-6)</label>
                    <input type="number" id="cardCount" min="1" max="6" value="3" class="w-full px-4 py-2 border border-charcoal/20 rounded-md focus:ring-2 focus:ring-teal focus:border-teal">
                </div>
                
                <button id="generateBtn" class="w-full btn-primary py-3 px-6 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal transition-colors font-medium">
                    Generate Prompt Cards
                </button>
            </div>

            <!-- Printer Setup Instructions -->
            <div class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-6 mb-8 no-print">
                <h2 class="text-2xl font-serif mb-4 text-charcoal">How to Print Your Prompt Cards</h2>
                <p class="text-charcoal/80 mb-4">Follow these steps to print each prompt card on an A5 sheet in landscape orientation, filling 80% of the page:</p>
                <ol class="list-decimal list-inside space-y-2 text-charcoal/80">
                    <li><strong>Select A5 Paper:</strong> Use A5-sized paper (148mm x 210mm or 5.83in x 8.27in). If unavailable, cut A4 paper in half.</li>
                    <li><strong>Open Print Dialog:</strong> After generating cards, click the "Print Cards" button (or press Ctrl+P / Cmd+P).</li>
                    <li><strong>Set Paper Size and Orientation:</strong> In "Preferences" or "Properties," select "A5" paper size and "Landscape" orientation. If A5 is not listed, choose "Custom" and enter 148mm x 210mm.</li>
                    <li><strong>Adjust Layout:</strong> Set margins to "None" (margins are managed by CSS). Disable headers/footers.</li>
                    <li><strong>Print Settings:</strong> Ensure "Print on Both Sides" is off and scaling is "100%" or "Actual Size." Choose high quality if available.</li>
                    <li><strong>Preview and Print:</strong> Verify the preview shows one card per A5 sheet, centered, filling 80% of the page with 8 blank writing lines. Adjust if needed, then print.</li>
                </ol>
                <p class="text-charcoal/80 mt-4 text-sm">Note: Printer settings vary by model. Consult your printer’s manual if issues arise with A5 printing. Test with one sheet first.</p>
            </div>
            
            <!-- Print Instructions -->
            <div id="printInstructions" class="max-w-2xl mx-auto bg-teal-light border border-teal-medium rounded-lg p-4 mb-8 hidden no-print">
                <div class="flex items-start">
                    <div class="flex-shrink-0 pt-0.5">
                        <i class="fas fa-info-circle text-teal"></i>
                    </div>
                    <div class="ml-3">
                        <h3 class="text-sm font-medium text-charcoal">Ready to print!</h3>
                        <div class="mt-2 text-sm text-charcoal/80">
                            <p>Your personal development prompt cards are ready. Click below to print each card on an A5 sheet in landscape orientation, or generate new ones.</p>
                        </div>
                        <div class="mt-4">
                            <button id="printBtn" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-teal hover:bg-teal/80 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal">
                                <i class="fas fa-print mr-2"></i>
                                Print Cards
                            </button>
                            <button id="newCardsBtn" class="ml-3 inline-flex items-center px-4 py-2 border border-charcoal/20 shadow-sm text-sm font-medium rounded-md text-charcoal bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal">
                                Generate New Cards
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Print Header -->
            <div class="print-only text-center mb-8">
                <h1 class="text-3xl font-serif" id="printTitle">Personal Development Prompt Cards</h1>
                <p class="text-charcoal/60" id="printSubtitle"></p>
                <p class="text-charcoal/60 text-xs">Key: xai-a2Oi7ieAgL195XyzbSYPYM0hPztn58z7isltarLBGC5bh0TMsRy0ZqFRewKTEKm4Bh4CMckQV5Rl7lq3</p>
            </div>
            
            <!-- Results Container -->
            <div id="resultsContainer" class="grid grid-cols-1 gap-10 mb-8 card-grid"></div>
        </main>
        
        <!-- Footer -->
        <footer class="bg-charcoal text-white py-4 no-print">
            <div class="container mx-auto px-4 text-center">
                <p>© 2025 Personal Development Prompt Cards | Create printable self-help prompting cards</p>
            </div>
        </footer>
    </div>

    <script>
        // API Configuration
        const API_KEY = 'xai-a2Oi7ieAgL195XyzbSYPYM0hPztn58z7isltarLBGC5bh0TMsRy0ZqFRewKTEKm4Bh4CMckQV5Rl7lq3';
        const API_BASE_URL = 'https://api.x.ai';

        // Niche and Sub-niche data for personal development
        const nicheData = {
            mindfulness: ["Meditation Practice", "Present Moment Awareness", "Mindful Eating", "Body Scan", "Breathing Techniques", "Mindful Movement", "Stress Reduction", "Custom..."],
            productivity: ["Goal Setting", "Time Blocking", "Focus Techniques", "Prioritization", "Overcoming Procrastination", "Energy Management", "Deep Work", "Custom..."],
            confidence: ["Self-Talk", "Impostor Syndrome", "Social Confidence", "Body Image", "Public Speaking", "Decision Making", "Assertiveness", "Custom..."],
            habits: ["Habit Stacking", "Morning Routines", "Habit Tracking", "Breaking Bad Habits", "Micro Habits", "Identity-Based Habits", "Habit Triggers", "Custom..."],
            relationships: ["Active Listening", "Conflict Resolution", "Setting Boundaries", "Empathy Building", "Effective Communication", "Building Trust", "Forgiveness", "Custom..."],
            career: ["Finding Purpose", "Networking", "Leadership Skills", "Work-Life Balance", "Career Transitions", "Personal Branding", "Negotiation", "Custom..."],
            emotional: ["Emotional Awareness", "Regulating Emotions", "Empathy", "Self-Compassion", "Resilience", "Managing Stress", "Processing Grief", "Custom..."],
            wellness: ["Sleep Optimization", "Nutrition", "Exercise Habits", "Mental Health", "Energy Management", "Digital Wellbeing", "Holistic Health", "Custom..."]
        };

        // DOM Elements
        const nicheSelect = document.getElementById('niche');
        const customNicheField = document.getElementById('customNicheField');
        const customNicheInput = document.getElementById('customNiche');
        const subNicheSelect = document.getElementById('subNiche');
        const customSubNicheField = document.getElementById('customSubNicheField');
        const customSubNicheInput = document.getElementById('customSubNiche');
        const cardCountInput = document.getElementById('cardCount');
        const generateBtn = document.getElementById('generateBtn');
        const resultsContainer = document.getElementById('resultsContainer');
        const printInstructions = document.getElementById('printInstructions');
        const printBtn = document.getElementById('printBtn');
        const newCardsBtn = document.getElementById('newCardsBtn');
        const printTitle = document.getElementById('printTitle');
        const printSubtitle = document.getElementById('printSubtitle');

        // Event Listeners
        nicheSelect.addEventListener('change', updateSubNicheOptions);
        subNicheSelect.addEventListener('change', handleSubNicheChange);
        generateBtn.addEventListener('click', generatePromptCards);
        printBtn.addEventListener('click', () => window.print());
        newCardsBtn.addEventListener('click', resetForm);

        // Functions
        function updateSubNicheOptions() {
            const selectedNiche = nicheSelect.value;
            
            customNicheField.classList.toggle('hidden', selectedNiche !== 'custom');
            subNicheSelect.innerHTML = '';
            
            if (selectedNiche && selectedNiche !== 'custom') {
                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = `Select a ${selectedNiche} sub-niche...`;
                subNicheSelect.appendChild(defaultOption);
                
                const subNiches = nicheData[selectedNiche] || [];
                subNiches.forEach(subNiche => {
                    const option = document.createElement('option');
                    option.value = subNiche === 'Custom...' ? 'custom' : subNiche;
                    option.textContent = subNiche;
                    subNicheSelect.appendChild(option);
                });
            } else {
                const defaultOption = document.createElement('option');
                defaultOption.value = '';
                defaultOption.textContent = selectedNiche === 'custom' ? 'Select or enter a sub-niche...' : 'First select a niche...';
                subNicheSelect.appendChild(defaultOption);
                
                if (selectedNiche === 'custom') {
                    const customOption = document.createElement('option');
                    customOption.value = 'custom';
                    customOption.textContent = 'Custom Sub-Niche...';
                    subNicheSelect.appendChild(customOption);
                }
            }
        }

        function handleSubNicheChange() {
            customSubNicheField.classList.toggle('hidden', subNicheSelect.value !== 'custom');
        }

        function getSelectedNiche() {
            const selectedNiche = nicheSelect.value;
            return selectedNiche === 'custom' ? customNicheInput.value.trim() || 'Personal Development' : selectedNiche;
        }

        function getSelectedSubNiche() {
            const selectedSubNiche = subNicheSelect.value;
            return selectedSubNiche === 'custom' ? customSubNicheInput.value.trim() || 'Custom Topic' : selectedSubNiche;
        }

        function getNicheDisplayName(niche) {
            const nicheMap = {
                'mindfulness': 'Mindfulness & Meditation',
                'productivity': 'Productivity & Time Management',
                'confidence': 'Confidence & Self-Esteem',
                'habits': 'Habit Formation',
                'relationships': 'Relationships & Communication',
                'career': 'Career Development',
                'emotional': 'Emotional Intelligence',
                'wellness': 'Health & Wellness'
            };
            return nicheMap[niche] || niche;
        }

        // Fetch available models (for verification or selection)
        async function fetchModels() {
            try {
                const response = await fetch(`${API_BASE_URL}/v1/models`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json'
                    }
                });
                if (!response.ok) throw new Error('Failed to fetch models');
                const data = await response.json();
                console.log('Available models:', data);
                return data;
            } catch (error) {
                console.error('Error fetching models:', error);
                alert('Failed to fetch models. Using default model.');
                return null;
            }
        }

        // Fetch prompts from xAI API
        async function fetchPrompts(niche, subNiche, count) {
            try {
                const systemPrompt = `You are a personal development coach. Generate ${count} unique, reflective prompts for a personal development journal focused on the niche "${niche}" and sub-niche "${subNiche}". Each prompt should be a concise question or statement encouraging self-reflection, suitable for writing a detailed response.`;
                
                const response = await fetch(`${API_BASE_URL}/v1/chat/completions`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'grok', // Replace with desired model if different
                        messages: [
                            { role: 'system', content: systemPrompt },
                            { role: 'user', content: 'Generate the prompts now.' }
                        ],
                        max_tokens: 500,
                        temperature: 0.7,
                        n: 1
                    })
                });

                if (!response.ok) throw new Error('Failed to fetch prompts from API');
                const data = await response.json();
                const promptsText = data.choices[0]?.message?.content || '';
                
                // Parse the response into an array of prompts
                const prompts = promptsText.split('\n').filter(line => line.trim() !== '');
                if (prompts.length < count) throw new Error('Not enough prompts generated');
                
                return prompts.slice(0, count);
            } catch (error) {
                console.error('Error fetching prompts:', error);
                alert('Failed to generate prompts via API. Using fallback prompts.');
                // Fallback prompts
                const fallbackPrompts = [
                    `What aspect of ${subNiche} challenges you the most? What small step could you take to address it?`,
                    `How would developing mastery in ${subNiche} impact other areas of your life?`,
                    `What belief about ${subNiche} might be limiting your growth? How could you reframe it?`,
                    `What would your daily routine look like if ${subNiche} was truly a priority for you?`,
                    `Who inspires you in the area of ${subNiche}? What specific quality or habit could you learn from them?`,
                    `What's one small experiment you could try this week related to ${subNiche}?`
                ];
                return fallbackPrompts.slice(0, count);
            }
        }

        function getCurrentDate() {
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            const now = new Date();
            return `${months[now.getMonth()]} ${now.getDate()}, ${now.getFullYear()}`;
        }

        function getMoodForNiche(niche) {
            const moodMap = {
                'mindfulness': 'Peaceful',
                'productivity': 'Focused',
                'confidence': 'Empowered',
                'habits': 'Consistent',
                'relationships': 'Connected',
                'career': 'Ambitious',
                'emotional': 'Balanced',
                'wellness': 'Vibrant',
                'custom': 'Inspired'
            };
            return moodMap[niche] || 'Inspired';
        }

        async function generatePromptCards() {
            const niche = getSelectedNiche();
            const subNiche = getSelectedSubNiche();
            
            if (!niche) {
                alert('Please select or enter a personal development niche.');
                return;
            }
            
            if (!subNiche) {
                alert('Please select or enter a sub-niche.');
                return;
            }
            
            const cardCount = Math.min(Math.max(parseInt(cardCountInput.value) || 3, 1), 6);
            
            // Fetch prompts from xAI API
            const prompts = await fetchPrompts(niche, subNiche, cardCount);
            
            resultsContainer.innerHTML = '';
            
            prompts.forEach((prompt, index) => {
                const card = document.createElement('div');
                card.className = `notecard relative max-w-md mx-auto`;
                
                let colorClass, badgeColor;
                switch(niche) {
                    case 'mindfulness':
                        colorClass = 'text-mindfulness bg-mindfulness-light';
                        badgeColor = 'bg-mindfulness';
                        break;
                    case 'productivity':
                        colorClass = 'text-productivity bg-productivity-light';
                        badgeColor = 'bg-productivity';
                        break;
                    case 'confidence':
                        colorClass = 'text-confidence bg-confidence-light';
                        badgeColor = 'bg-confidence';
                        break;
                    case 'habits':
                        colorClass = 'text-habits bg-habits-light';
                        badgeColor = 'bg-habits';
                        break;
                    case 'relationships':
                        colorClass = 'text-relationships bg-relationships-light';
                        badgeColor = 'bg-relationships';
                        break;
                    case 'career':
                        colorClass = 'text-career bg-career-light';
                        badgeColor = 'bg-career';
                        break;
                    case 'emotional':
                        colorClass = 'text-emotional bg-emotional-light';
                        badgeColor = 'bg-emotional';
                        break;
                    case 'wellness':
                        colorClass = 'text-wellness bg-wellness-light';
                        badgeColor = 'bg-wellness';
                        break;
                    default:
                        colorClass = 'text-teal bg-teal-light';
                        badgeColor = 'bg-teal';
                }
                
                const currentDate = getCurrentDate();
                const mood = getMoodForNiche(niche);
                
                card.innerHTML = `
                    <div class="bg-white rounded-xl p-6 shadow-lg card-shadow">
                        <div class="notecard-content">
                            <!-- Header -->
                            <div class="flex justify-between items-center mb-4">
                                <div class="${colorClass.split(' ')[0]} font-medium">${getNicheDisplayName(niche)}</div>
                                <div class="text-charcoal/60 text-sm">${currentDate}</div>
                            </div>
                            <!-- Title -->
                            <h3 class="text-xl font-serif mb-3">${subNiche}</h3>
                            <!-- Content -->
                            <div class="space-y-2 mb-4">
                                <!-- Prompt -->
                                <div class="${colorClass} p-3 rounded-lg">
                                    <p class="text-sm font-medium text-charcoal/80">${prompt}</p>
                                </div>
                                <!-- Handwritten Response Lines (Screen: 3 blank lines) -->
                                <div class="response-lines screen-only">
                                    ${Array.from({ length: 3 }, () => `
                                        <div class="border-b border-dashed border-charcoal/20 py-2"></div>
                                    `).join('')}
                                </div>
                                <!-- Handwritten Response Lines (Print: 8 blank lines) -->
                                <div class="response-lines print-only">
                                    ${Array.from({ length: 8 }, () => `
                                        <div class="border-b border-dashed border-charcoal/20 py-2"></div>
                                    `).join('')}
                                </div>
                            </div>
                            <!-- Footer -->
                            <div class="flex justify-between items-center mt-auto">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 text-yellow mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3 .921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784 .57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81 .588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                                    </svg>
                                    <span class="text-sm text-charcoal/60">Mood: ${mood}</span>
                                </div>
                                <div class="${colorClass.split(' ')[0]} text-sm font-medium">
                                    <a href="#" class="flex items-center no-print">
                                        <span>Prompt #${index + 1}</span>
                                        <svg class="w-4 h-4 ml-1" fill="currentColor" viewBox="0 0 20 20">
                                            <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                        </svg>
                                    </a>
                                    <span class="print-only">Prompt #${index + 1}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Badge -->
                    <div class="badge ${badgeColor}">${index === 0 ? 'Start Here' : (index === cardCount - 1 ? 'Final Prompt' : `#${index + 1}`)}</div>
                `;
                
                resultsContainer.appendChild(card);
            });
            
            printInstructions.classList.remove('hidden');
            printTitle.textContent = `${getNicheDisplayName(niche)} Prompt Cards`;
            printSubtitle.textContent = `${subNiche} - ${cardCount} Personal Development Prompts`;
            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function resetForm() {
            printInstructions.classList.add('hidden');
            resultsContainer.innerHTML = '';
            cardCountInput.value = 3;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize the form and fetch models
        updateSubNicheOptions();
        fetchModels();
    </script>
</body>
</html>